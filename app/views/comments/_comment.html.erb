<% @post.comments.each do |comment| %>
 
    
  <div class="card">
    <div class="card-body">
      <% if !comment.parent_id.present? %>
        <strong>Comment:</strong>
        <%= comment.content %> (<i> <%= comment.commenter %> </i>)
        <i class="fa fa-reply"></i>
        <%= link_to 'Reply', new_post_comment_path(@post, parent_id: comment.id), remote: true, class: 'd_block' %>
      <% end %>
      
    </div>
  </div>
  <br>
  <% if comment.replies.any? %>
    <% comment.replies.each do |reply| %> 
      <%= render partial: 'comments/reply', locals: { reply: reply } %>
    <% end %>
  <% end %>
  <br>
  <div id="reply-form-<%= comment.id %>"></div>
  


  
<% end %>

<script>
  <%
=begin%>
 const d_blocks = document.querySelectorAll("a.d_block")
  const replies = document.querySelectorAll(".card.ml-5.reply")
  
  if(d_blocks.length > 0){
    d_blocks.forEach((d_block,indexD) => {
      d_block.onclick = function(e) {
        e.preventDefault()

        replies.forEach((reply,indexR) => {
          if(indexD === indexR){
            reply.classList.toggle('display')
          }
        })
      }
    });
  } 
<%
=end%>
</script>